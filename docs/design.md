# フロージャーナル

テーマ: テキストエディタ x タイピング速度

コンセプト: 止まると消える、思考の流れを途切れさせないジャーナリング

---

## Evidence（科学的根拠）

### なぜ「止まらず書くこと」が重要か

ジャーナリングで効果を生むのは「速さ」ではなく「止まらず書くこと」

1. Pennebaker式の標準プロトコル
   - 「ペンを止めない」「文法やスピードは気にしない」が核心
   - 15-20分の連続書記が推奨
   - UC Berkeley: 「20分間、止まらずに最も深い感情を自由記述」
   - 出典: https://ggia.berkeley.edu/practice/expressive_writing

2. 効果指標は「没入度」
   - 2023年Frontiers研究: 「長めの文章を書いた＝深く関与した」参加者のみ効果
   - 速度は分析されていない
   - 感情受容の指示でじっくり掘り下げることが効果を左右
   - 出典: https://www.frontiersin.org/journals/psychology/articles/10.3389/fpsyg.2023.1192595/full

3. 速度を求めすぎるリスク
   - 認知処理の余白が消える → 因果語や洞察語を使った再解釈が不足
   - ストレス増幅 → VA警告: 「感情が圧倒的になったら中止」
   - ネガティブ反芻 → 焦って書くと感情処理より列挙・愚痴に流れる
   - 出典: https://www.va.gov/WHOLEHEALTHLIBRARY/tools/therapeutic-journaling.asp

### フロージャーナルの設計根拠

止まらず書くことを促す仕組み:
- ゲージで「思考の流れ」を可視化
- 停止すると文字が消える緊張感
- 復活メカニズムで書き続けることを報酬化

科学的プロトコルとの整合性:
- 15分セッション（推奨プロトコル）
- 文法やスピードを気にしない（CPM閾値を緩く）
- 没入度を高める（統計で自己理解を促進）

詳細: docs/journaling-best-practices.md

---

## MVP（必須機能）

### ロジック

#### 1. フローゲージの仕組み

思考の流れを可視化するゲージ

**入力方式: ひらがな推奨**
- 漢字変換で止まることなく、思考の流れを保つ
- CPM測定がシンプル（確定文字数 ≈ キーストローク数）

**増減ルール（CPMベース）:**
- 90CPM以上: +2%/秒（思考が流れている）
- 60-90CPM: +1%/秒（考えながら書いている）
- 30-60CPM: -1%/秒（少し止まりかけ）
- 30CPM未満: -3%/秒（止まっている）
- 完全停止（0CPM）: -8%/秒

**理想ゾーン:**
- 90-120CPM = Flow Zone（緑）
- 速すぎる必要はない、思考が途切れなければOK

#### 2. 霞むシステムの仕組み

思考の停止を防ぐ仕組み

**トリガー条件:**
- ゲージ0% → カウントダウン開始（5秒）
- 対象: テキスト全体

**復活条件（モード別）:**
- クイックモード（1分）: 5秒で8字（≈96CPM）
- 標準モード（15分）: 5秒で8字（≈96CPM）
- Flow Zoneの範囲内で適度な負荷

**成功時:**
- メッセージ: 「霧が晴れた！フローに戻れた」
- ゲージ40%まで回復
- テキスト全体が一気に100%の透明度に戻る

**失敗時:**
- メッセージ: 「セッション終了！」
- セッション即座に終了
- 終了画面に移行（統計 + AI要約）
- ※失敗もネガティブに扱わず、「ここまで書けた」ことを評価

#### 3. セッション構造

**時間制限:**
- クイックモード: 1分（デモ用）
- 標準モード: 15分（推奨、科学的根拠あり）

**途中終了:**
- いつでも「終了」ボタンで停止可能
- 緊急時は強制終了も可

**終了時の統計:**
- 総文字数
- 平均CPM
- Flow Zone滞在率（90-120CPM帯）
- Flow Streak最大値
- 停止回数

**AI要約（OpenAI API）:**
- 書いた内容の要約（2-3文）
- 感情のキーワード抽出（3-5個）
- 気づき・洞察の提示
- ポジティブなフィードバック
- ※霞み失敗でセッションが終了した場合も表示

### UI/UX設計

#### 1. 基本方針

集中できる最小限の情報

#### 2. 視覚演出

**ゲージの状態変化:**
- 100%: Flow Surge（背景が光る、達成感）
- 0%: 危機モード（3秒カウントダウン開始）

**霞むエフェクト:**
- テキスト全体が5秒かけてゆっくり薄くなる（透明度 100% → 50% → 20%）
- 背景に軽い霧層を重ねる
- じわじわと霞む緊張感 + 波紋エフェクト

**復活演出:**
- 一気にシャキッと戻る
- 「薄くなる→取り戻せる」が一目でわかる

#### 3. レイアウト

**開始画面:**
- モード選択（クイックモード1分 / 標準モード15分）
- 注意書き: 「💡 ひらがなで書きましょう」
  - 漢字変換で止まることなく、思考の流れを保てます

**メイン画面:**
- メイン: フル幅のテキストエリア（余白多め、自動拡張）
- サイドバー・装飾なし
- ゲージ: 画面上部中央の細い水平バー + 色帯のみ
  - 数値表示はホバー/タップで表示
- 補助情報: 画面下部に小さなバー
  - 残り時間、Flow Zone帯、停止回数など最小限

#### 4. モバイル対応

- 縦配置: 上（ゲージ + 残り時間）、下（エディタ）
- 霞み中: 画面下部に復活カウントバナー
- 詳細統計は終了画面に集約

---

## デモの流れ（1分モード）

1. テーマ選択「今日の気持ち」
2. タイピング開始（90-120CPMのFlow Zone維持、ひらがなで書く）
3. 少し考えて手を止める → ゲージ減少、枠が黄色に
4. さらに止まる → ゲージ0%、「流れが霞み始めた…」テキスト全体が5秒かけてじわじわ薄くなる
5. パターンA: 慌てて感情を書き出す → 5秒で8字 → 「霧が晴れた！」復活
6. パターンB: 間に合わず → 「セッション終了！」→ 統計 + AI要約表示
7. 1分経過 → 終了、統計 + AI要約表示

デモポイント:
- 「止まらず書く」ことの重要性を体感
- 「霞む→晴れる」の視覚演出が印象的
- 失敗してもポジティブに終了（「セッション終了！」）
- AI要約で自己理解を深める
- 統計で自分の書き方を知る

---

## 実装（1日で完成）

技術スタック:
- フロント: React / Vue / Vanilla JS
- 必須: テキストエリア + タイマー + CPM計測 + CSS
- API: OpenAI API（終了時の要約生成）

コア実装:
1. キーイベント監視（最後の入力時刻を記録）
2. CPM計算（過去5秒の文字数 ÷ 5秒 × 60）
3. ゲージ管理（CPMに応じて増減）
4. タイマー管理（セッション時間、カウントダウン）
5. opacity制御でフェード演出
6. OpenAI API連携（終了時の要約生成）

実装優先度:
1. ⭐ テキストエリア + タイマー + CPM計測
2. ⭐ フローゲージ表示 + 増減ロジック
3. ⭐ 文字フェードアウト + 復活
4. ⭐ 終了時統計 + OpenAI API要約
5. オプション: アニメーション強化

開発スケジュール（8時間想定）:
- 0-2h: 環境構築 + 基本UI
- 2-4h: CPM計測 + ゲージロジック
- 4-6h: 文字消滅 + 復活
- 6-7.5h: 終了時統計 + OpenAI API連携
- 7.5-8h: デモ準備 + 調整

---

## オプショナル機能

- AIフォローアップ質問（霞み中にリアルタイムで質問提示）
  - 「それってどんな気持ち？」「何から来てる？」など
  - 書き続けるヒントを提供
- Markdownダウンロード
  - YYYY-MM-DD-journal.md 形式で保存
- Obsidian連携
  - Local REST API経由、または手動でvault移動
- 統計の履歴保存・可視化
  - 過去のセッションとの比較

---

## ピッチ

課題: ジャーナリングで手が止まり、思考の流れが途切れる

解決: タイピングを止めると文字が消える緊張感で、書き続けることを促す

価値:
- 思考の流れを途切れさせない
- 科学的根拠: 止まらず15-20分書くことが効果的
- 深い感情と意味づけを引き出す

デモ:
1. 実際にタイピング（Flow Zone維持）
2. 手を止める → 文字が霞む様子を見せる
3. 慌てて書く → 霧が晴れて復活
4. 「これが思考の流れを保つ体験です」
5. 統計を見せる → 自己理解が深まる

差別化:
- 速度ではなく「止まらないこと」を重視
- 科学的根拠に基づく設計
- 統計で自己理解を促進
